<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.11: http://docutils.sourceforge.net/" />
<title>cordic user manual</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id$
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="cordic-user-manual">
<h1 class="title">cordic user manual</h1>

<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<tbody valign="top">
<tr><td><strong>Title</strong></td>
<td>cordic (Multi-function, universal, fixed-point CORDIC)</td>
</tr>
<tr><td><strong>Author</strong></td>
<td>Nikolaos Kavvadias (C) 2010, 2011, 2012, 2013, 2014</td>
</tr>
<tr><td><strong>Contact</strong></td>
<td><a class="reference external" href="mailto:nikos&#64;nkavvadias.com">nikos&#64;nkavvadias.com</a></td>
</tr>
<tr><td><strong>Website</strong></td>
<td><a class="reference external" href="http://www.nkavvadias.com">http://www.nkavvadias.com</a></td>
</tr>
<tr><td><strong>Release Date</strong></td>
<td>22 February 2014</td>
</tr>
<tr><td><strong>Version</strong></td>
<td>1.0.0</td>
</tr>
<tr><td><strong>Rev. history</strong></td>
<td>&nbsp;</td>
</tr>
<tr><td><strong>v1.0.0</strong></td>
<td><p class="first">2013-02-22</p>
<p class="last">Updated architecture. A single cycle is now needed per
iteration. Documentation updated to RestructuredText.
Logic synthesis scripts updated for Xilinx ISE/XST 14.6.</p>
</td>
</tr>
<tr><td><strong>v0.0.2</strong></td>
<td><p class="first">2010-11-08</p>
<p class="last">A universal CORDIC algorithm is now specified. The new
version uses the full CORDIC interface (X,Y,Z) for input
and output. Q2.14 (16-bit) signed fixed-point arithmetic
is emulated through the use of integers.</p>
</td>
</tr>
<tr><td><strong>v0.0.1</strong></td>
<td><p class="first">2010-11-04</p>
<p class="last">The CORDIC-EULA.txt has been added.</p>
</td>
</tr>
<tr><td><strong>v0.0.0</strong></td>
<td><p class="first">2010-11-01</p>
<p class="last">Initial release.</p>
</td>
</tr>
</tbody>
</table>
<div class="section" id="introduction">
<h1>1. Introduction</h1>
<p><tt class="docutils literal">cordic</tt> is a collection of files comprising an implementation of a universal
CORDIC algorithm (rotation/vectoring direction, circular/linear/hyperbolic mode)
high-level synthesis benchmark by Nikolaos Kavvadias. All design files except
<tt class="docutils literal">cordic.c</tt>, <tt class="docutils literal">cordic.nac</tt>, and <tt class="docutils literal">cordic_test_data.txt</tt>
have been automatically generated. The original <tt class="docutils literal">cordic.vhd</tt> has been
optimized via (manual) operation chaining. <tt class="docutils literal">operpack.vhd</tt>,
<tt class="docutils literal">std_logic_textio.vhd</tt> are simulation/synthesis library files, copyrighted by
their respective authors.</p>
<p>IMPORTANT: Please go through the license agreement (<tt class="docutils literal"><span class="pre">CORDIC-EULA.txt</span></tt>) to
ensure proper use of the CORDIC IP CORE.</p>
</div>
<div class="section" id="file-listing">
<h1>2. File listing</h1>
<p>The CORDIC IP core distribution includes the following files:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<tbody valign="top">
<tr><td>/cordic</td>
<td>Top-level directory</td>
</tr>
<tr><td>/bench/vhdl</td>
<td>Benchmarks VHDL directory</td>
</tr>
<tr><td>cordic_tb.vhd</td>
<td>Automatically-generated VHDL testbench file.</td>
</tr>
<tr><td>/doc</td>
<td>Documentation directory</td>
</tr>
<tr><td>AUTHORS</td>
<td>List of authors.</td>
</tr>
<tr><td>CORDIC-EULA.txt</td>
<td>End-user license agreement for using <tt class="docutils literal">cordic</tt>.</td>
</tr>
<tr><td>README</td>
<td>This file.</td>
</tr>
<tr><td>README.html</td>
<td>HTML version of README.</td>
</tr>
<tr><td>README.pdf</td>
<td>PDF version of README.</td>
</tr>
<tr><td>rst2docs.sh</td>
<td>Bash script for generating the HTML and PDF versions.</td>
</tr>
<tr><td>VERSION</td>
<td>Current version of the CORDIC IP cores.</td>
</tr>
<tr><td>/rtl/vhdl</td>
<td>RTL source code directory for the IP core</td>
</tr>
<tr><td>cordic.vhd</td>
<td>Automatically-generated VHDL design file
(hand-optimized for operation chaining).</td>
</tr>
<tr><td>cordic_cdt_pkg.vhd</td>
<td>Package containing declarations.</td>
</tr>
<tr><td>/sim/rtl_sim</td>
<td>RTL simulation files directory</td>
</tr>
<tr><td>/sim/rtl_sim/bin</td>
<td>RTL simulation scripts directory</td>
</tr>
<tr><td>cordic.mk</td>
<td>Unix/Cygwin makefile for running a GHDL simulation.</td>
</tr>
<tr><td>/sim/rtl_sim/out</td>
<td>Dumps and other useful output from RTL simulation</td>
</tr>
<tr><td>cordic_alg_test_res-
ults.txt</td>
<td>Check this file for output.</td>
</tr>
<tr><td>/sim/rtl_sim/run</td>
<td>Files for running RTL simulations</td>
</tr>
<tr><td>cordic.sh</td>
<td>Unix/Cygwin bash shell script for running a GHDL
simulation.</td>
</tr>
<tr><td>cordic_test_data.txt</td>
<td>Reference vectors.</td>
</tr>
<tr><td>/sim/rtl_sim/vhdl</td>
<td>VHDL source files used for running RTL simulations</td>
</tr>
<tr><td>operpack.vhd</td>
<td>Reduced version of Nikolaos Kavvadias' operator
library.</td>
</tr>
<tr><td>std_logic_textio.vhd</td>
<td>Modified version of a testbench-related package.</td>
</tr>
<tr><td>/sw</td>
<td>Software utilities</td>
</tr>
<tr><td>cordic.c</td>
<td>Reference C implementation for test vector
generation.</td>
</tr>
<tr><td>cordic.dot</td>
<td>CDFG of the cordic procedure as a Graphviz file.</td>
</tr>
<tr><td>cordic.dot.png</td>
<td>PNG image for the above.</td>
</tr>
<tr><td>cordic.nac</td>
<td>The NAC description of the CORDIC application.</td>
</tr>
<tr><td>cordic-flp.txt</td>
<td>Comparison of fixed-point to floating-point CORDIC
(using calls to the <tt class="docutils literal">math</tt> C library) results.</td>
</tr>
<tr><td>/syn/xise</td>
<td>Synthesis files for use with Xilinx ISE</td>
</tr>
<tr><td>/syn/xise/bin</td>
<td>Synthesis scripts directory</td>
</tr>
<tr><td>xst.mk</td>
<td>Standard Makefile for command-line usage of ISE.</td>
</tr>
<tr><td>/syn/xise/log</td>
<td>Generated log files from the synthesis process</td>
</tr>
<tr><td>cordic-xst14.6.txt</td>
<td>Synthesis report from Xilinx ISE (XST) 14.6.</td>
</tr>
<tr><td>/syn/xise/run</td>
<td>Files for running synthesis</td>
</tr>
<tr><td>syn.sh</td>
<td>Bash shell script for synthesizing <tt class="docutils literal">cordic</tt>
architectures with ISE.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="usage">
<h1>3. Usage</h1>
<ol class="arabic simple">
<li>Run the shell script from a Unix/Linux/Cygwin command line.</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">$ ./cordic.sh</tt></div>
</div>
<p>After this process, the <tt class="docutils literal">cordic_alg_test_results.txt</tt> file is generated
containing simulation results. The GHDL simulation will also generate
a VCD (waveform) file that can be opened with GTKwave:</p>
<div class="line-block">
<div class="line"><tt class="docutils literal">$gtkwave cordic_fsmd.vcd</tt></div>
</div>
<p>2. Create, build and run a Modelsim project with the following files (in
this order):</p>
<pre class="literal-block">
operpack.vhd
std_logic_textio.vhd
cordic_cdt_pkg.vhd
ram.vhd
cordic.vhd
cordic_tb.vhd
</pre>
</div>
<div class="section" id="synthesis">
<h1>4. Synthesis</h1>
<p>The CORDIC IP cores distribution includes scripts for logic synthesis automation
supporting Xilinx ISE. The corresponding synthesis script can be edited in order
to specify the following for adapting to the user's setup:</p>
<ul class="simple">
<li><tt class="docutils literal">XDIR</tt>: the path to the <tt class="docutils literal">/bin</tt> subdirectory of the Xilinx ISE/XST
installation where the <tt class="docutils literal">xst.exe</tt> executable is placed</li>
<li><tt class="docutils literal">arch</tt>: specific FPGA architecture (device family) to be used for synthesis</li>
<li><tt class="docutils literal">part</tt>: specific FPGA part (device) to be used for synthesis</li>
</ul>
<div class="section" id="running-the-synthesis-script">
<h2>4.1. Running the synthesis script</h2>
<p>For running the Xilinx ISE synthesis tool, change directory to the
<tt class="docutils literal">/syn/xise/run</tt> subdirectory from the top-level directory of CORDIC:</p>
<div class="line-block">
<div class="line"><tt class="docutils literal">$ ./syn/xise/run</tt></div>
</div>
<p>and execute the corresponding script (for synthesizing <tt class="docutils literal">hwlu</tt>):</p>
<div class="line-block">
<div class="line"><tt class="docutils literal">$ ./syn.sh</tt></div>
</div>
<p>The synthesis procedure invokes several Xilinx ISE command-line tools for logic
synthesis as described in the corresponding Makefile, found in the
the <tt class="docutils literal">/syn/xise/bin</tt> subdirectory.</p>
<p>Typically, this process includes the following:</p>
<ul class="simple">
<li>Generation of the <tt class="docutils literal">*.xst</tt> synthesis script file.</li>
<li>Generation of the <tt class="docutils literal">*.ngc</tt> gate-level netlist file in NGC format.</li>
<li>Building the corresponding <tt class="docutils literal">*.ngd</tt> file.</li>
<li>Performing mapping using <tt class="docutils literal">map</tt> which generates the corresponding <tt class="docutils literal">*.ncd</tt>
file.</li>
<li>Place-and-routing using <tt class="docutils literal">par</tt> which updates the corresponding <tt class="docutils literal">*.ncd</tt>
file.</li>
<li>Tracing critical paths using <tt class="docutils literal">trce</tt> for reoptimizing the <tt class="docutils literal">*.ncd</tt> file.</li>
<li>Bitstream generation (<tt class="docutils literal">*.bit</tt>) using <tt class="docutils literal">bitgen</tt>, however with unused pins.</li>
</ul>
<p>Finally, the <tt class="docutils literal">cordic.bit</tt> bitstream file is produced.</p>
</div>
</div>
<div class="section" id="prerequisities">
<h1>5. Prerequisities</h1>
<ul>
<li><p class="first">Standard UNIX-based tools (tested with gcc-4.6.2 on MinGW/x86) [optional if
you use Modelsim].</p>
<ul class="simple">
<li>make</li>
<li>bash (shell)</li>
</ul>
<p>For this reason, MinGW (<a class="reference external" href="http://www.mingw.org">http://www.mingw.org</a>) or Cygwin
(<a class="reference external" href="http://sources.redhat.com/cygwin">http://sources.redhat.com/cygwin</a>) are suggested, since POSIX emulation
environments of sufficient completeness.</p>
</li>
<li><p class="first">GHDL simulator (<a class="reference external" href="http://ghdl.free.fr">http://ghdl.free.fr</a>) [optional if you use Modelsim].
Provides the <tt class="docutils literal">ghdl</tt> executable (has several Windows versions, with
0.29.1 and 0.31 being the latest). It also installs GTKwave on Windows.
Note that the latest version (0.31) from
<a class="reference external" href="http://sourceforge.net/project/ghdl-updates/">http://sourceforge.net/project/ghdl-updates/</a> does not include GTKwave.</p>
</li>
<li><p class="first">Xilinx ISE (free ISE webpack is available from the Xilinx website):
<a class="reference external" href="http://www.xilinx.com">http://www.xilinx.com</a>)
The 14.6 version on Windows 7/64-bit is known to work.</p>
</li>
</ul>
</div>
</div>
</body>
</html>
